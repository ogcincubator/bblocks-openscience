"$schema": https://json-schema.org/draft/2020-12/schema
description: 'EarthCode Experiment'
allOf:
  - $ref: bblocks://ogc.osc.geodcat-stac-earthcode.common
  - $ref: bblocks://ogc.geo.geodcat.geodcat-records
properties:
  properties:
    # because a Record is a "Feature" then the nested properties property can have
    # properties defining aspects of the prov Activity using the bblock schema for this
    allOf:
      - $ref: bblocks://ogc.bbr.wf4ever.wfprov.WorkflowRun
    type: object
    required:
      - osc:workflow
    properties:
      osc:workflow:
        $ref: bblocks://ogc.osc.geodcat-stac-earthcode.common#/$defs/osc:workflow
    

  links:
    type: array
    items:
      oneOf:
        - title: Other Link
          properties:
            rel:
              not:
                enum:
                  - via
                  - input
                  - environment
        - title: Link to Input Parameter
          properties:
            rel:
              const: input
        - title: Link to Execution Environment
          properties:
            rel:
              const: environment
        - $ref: bblocks://ogc.osc.geodcat-stac-earthcode.common#/$defs/via_links
